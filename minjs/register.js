"use strict";require(["../js/config"],function(){require(["jquery","common"],function(s){function i(){s(".newCode").click(function(){c=Math.floor(Math.random()*r.length),s(".check_code_img").attr("src","../images/yzcode/"+r[c]+".jpg")})}function o(){s("#Confirm_pwd_notice_img").css({display:"inline-block"}).find("img").attr("src","../images/register/no.gif"),s("#Confirm_pwd_notice_word").text("两次密码不一致").css({color:"red"})}function e(){s(".sexinput").find("input").click(function(){console.log(s(this).prop("checked")),1==s(this).prop("checked")?(s(this).prop("checked",!0),s(this).siblings().prop("checked",!1),s("#sex_notice").text(""),s("#sex_notice_sucess").css({display:"inline-block"}),s(this).attr("ispass",!0),s(this).siblings().attr("ispass",!0)):(s(this).prop("checked",!1),s("#sex_notice").text("请选择性别").css({color:"red"}),s("#sex_notice_sucess").css({display:"none"}),s(this).attr("ispass",!1))})}function t(s,i,o,e){s.focus(function(){o&&o.css({display:"none"}),i.text(e).css({display:"block",color:"#999999"})})}function n(i,o,e,t,n){i.blur(function(){n.test(s(this).val())?(o&&o.css({display:"inline-block"}).find("img").attr("src","../images/register/suc.jpg"),e.text(""),i.attr("ispass","true")):(o&&o.css({display:"inline-block"}).find("img").attr("src","../images/register/no.gif"),e.text(t).css({color:"red"}),i.attr("ispass","false"))})}s=jQuery;var r=["0M43","2L5N","3T7S","5Y93","68F9","98K4","165A","854U","1024","3341","6294","9242","CYX0","F7V8","H956","I745","R237","UX3V","Z1R8","Z169"],c=Math.floor(Math.random()*r.length);s(".check_code_img").attr("src","../images/yzcode/"+r[c]+".jpg");var a={mobile_phone:/^(\d{11})$/,mobile_phone_check:/^\d{4}$/,password:/^.{6,14}$/,Confirm_password:/^.{6,14}$/};s("#head_insert").load("login_head.html"),s("#footer_insert").load("footer.html"),s(function(){s("input").not("#getCheckCode").not(":last").each(function(){s(this).val(""),s(this).prop("checked",!1)}),t(s("#mobile_phone"),s("#mobile_notice"),s("#tel_notice"),"请输入正确的手机号码。便于您接受订单消息，找回密码等。"),n(s("#mobile_phone"),s("#tel_notice"),s("#mobile_notice"),"手机号码格式不对，必须为11位数字",a.mobile_phone),t(s("#mobile_phone_check"),s("#code_notice"),"","请输入手机验证码"),n(s("#mobile_phone_check"),"",s("#code_notice"),"验证码不能为空",a.mobile_phone_check),t(s("#password"),s("#pwd_notice_word"),s("#pwd_notice_img"),"密码长度6-14位，支持数字、符号、字母，字母区分大小写"),n(s("#password"),s("#pwd_notice_img"),s("#pwd_notice_word"),"密码长度必须6-14位，请输入",a.password),t(s("#Confirm_password"),s("#Confirm_pwd_notice_word"),s("#Confirm_pwd_notice_img"),"密码长度6-14位，支持数字、符号、字母，字母区分大小写"),s("#Confirm_password").blur(function(){console.log(s("#Confirm_password").val(),s("#password").val(),a.Confirm_password.test(s(this).val())),a.Confirm_password.test(s(this).val())&&s("#Confirm_password").val()==s("#password").val()?(s("#Confirm_pwd_notice_img").css({display:"inline-block"}).find("img").attr("src","../images/register/suc.jpg"),s("#Confirm_pwd_notice_word").text(""),s(this).attr("ispass",!0)):(s("#Confirm_pwd_notice_img").css({display:"inline-block"}),a.Confirm_password.test(s(this).val())?o():(s("#Confirm_pwd_notice_img").css({display:"inline-block"}).find("img").attr("src","../images/register/no.gif"),s("#Confirm_pwd_notice_word").text("密码长度必须6-14位，请输入").css({color:"red"})),s(this).attr("ispass",!1))}),i(),s("#check_code").blur(function(){s(this).val()==r[c]?s(this).attr("ispass",!0):s(this).attr("ispass",!1)}),e(),s("#register_submit").click(function(){var i=!0;if(s("input").not("#getCheckCode").not(":last").each(function(){console.log(s(this).attr("ispass")),"false"!=s(this).attr("ispass")&&void 0!=s(this).attr("ispass")||(i=!1)}),s("#password").val()!=s("#Confirm_password").val()&&(i=!1,o()),i){var e={username:s("#mobile_phone").val(),pwd:s("#password").val()},t=[];t=JSON.parse(Cookie.getCookie("message")),t=Array.from(t),console.log(t);var n=1;if(null==t)t.push(e);else{for(var r in t)if(t[r].username==e.username){n=0,alert("用户名已注册");break}1==n&&(t.push(e),Cookie.insertCookie("message",JSON.stringify(t),432e3,"/"),window.location.href="/html/login.html")}}else alert("注册失败，还有错误信息，请检查")})})})});