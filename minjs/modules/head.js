"use strict";function test(){var e=getCookie("loginmessage");e=JSON.parse(e),setTimeout(function(){e[0]&&e[0].login&&$(".login").html("您好&nbsp <a href='#'>"+e[0].username+"</a> 欢迎来到D1购物<a href='#'>(退出登录)</a>&nbsp"),$(".login").find("a").last().click(function(){e[0].login=!1,document.cookie="loginmessage=0;path=/;",window.location.href="/html/login.html"}),shoppingcar()},300),autocomplete()}function shoppingcar(){$(".cart table tbody").html("");var e=Cookie.getCookie("loginmessage");if(0==e)t="passerby";else var t=JSON.parse(e)[0].username;console.log(t);var n=getCookie("goods");n=JSON.parse(n),n=Array.from(n);for(r=0;r<n.length;r++)if(n[r].name==t){n=n[r].goods;break}for(var o=0,a=0,r=0;r<n.length;r++){var i=document.createElement("tr"),l=document.createElement("td");l.width=60,l.height=60,l.style="text-align:center";var c=document.createElement("img");c.src=n[r].src,c.width=50,c.height=50,l.appendChild(c);var s=document.createElement("td");s.width=250;var p=document.createElement("a");p.href="#",p.innerText=n[r].title,p.style="line-height:18px;color:#000",s.appendChild(p);var m=document.createElement("td");m.width=100,m.style="text-align:center";var d=document.createElement("em");d.innerText="￥"+n[r].getprice;var u=document.createElement("span");u.innerText="x"+n[r].num,m.appendChild(d),m.appendChild(u),i.appendChild(l),i.appendChild(s),i.appendChild(m),$(".cart table tbody").append(i),o+=parseInt(n[r].num),a+=parseInt(n[r].total)}$(".shops_num").text(o),$(".all_money").text(a),$(".shopping_car_word span").text(o)}function getCookie(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return decodeURIComponent(o[1])}return 0}function autocomplete(){$(".searchbox").autocomplete({source:function(e,t){$.ajax({url:"/api/ajax/search/hotkeys.jsp?q="+e.term+"&p=1&s=0&contentType=application%2Fjson%3B+charset%3Dutf-8",type:"get",success:function(e){e=JSON.parse(e);var n=[];for(var o in e.results)n.push(e.results[o].name);t(n)}})},select:function(e,t){console.log(t.item.value)}})}