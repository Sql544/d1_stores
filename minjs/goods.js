"use strict";require(["../js/config"],function(){require(["jquery","test","common","goods","jquery_ui","head"],function(t){function o(){t(".fixed_box").click(function(o){o.offsetY>62&&t("html").stop().animate({scrollTop:0},500)})}function i(){var o={src:"",title:"",id:"",size:"",vipprice:"",getprice:"",num:"",total:""},i=Cookie.getCookie("loginmessage");if(0==i)s="passerby";else var s=JSON.parse(i)[0].username;t(".mg_l img").click(function(){o.src=t(".wrap a img").attr("src"),o.title=t(".goods_right_title h1 font").text().trim(),o.id=t(".shop_id").text(),o.size="无",o.vipprice=t(".big_price").text().slice(1,t(".big_price").text().indexOf(".")),o.getprice=o.vipprice,o.num=t("#buy_num_input").val(),o.total=o.vipprice*o.num;var i=Cookie.getCookie("goods");i=JSON.parse(i),i=Array.from(i);for(c=0;c<i.length;c++)if(i[c].name==s){for(var e=0;e<i[c].goods.length;e++)if(i[c].goods[e].id==o.id){i[c].goods[e].num=parseInt(i[c].goods[e].num)+parseInt(o.num),i[c].goods[e].total=i[c].goods[e].num*i[c].goods[e].getprice;break}0!=i[c].goods.length&&e!=i[c].goods.length||i[c].goods.push(o);break}Cookie.insertCookie("goods",JSON.stringify(i),432e3,"/"),test(),t(".insert_into_cart").css({display:"block",top:t(window).height()/2+t(window).scrollTop()+"px"});for(c=0;c<i.length;c++)if(i[c].name==s){var n=i[c].goods;break}var a=0,r=0;for(var c in n)r+=parseInt(n[c].total),a+=parseInt(n[c].num);t(".hint_message span").first().text(a),t(".hint_message span").last().text(r)})}function s(){t(".btn_close").click(function(){t(".insert_into_cart").css({display:"none"})}),t(".continueShopping").click(function(){t(".insert_into_cart").css({display:"none"})})}function e(t){return t<10&&(t="0"+t.toString()),t}function n(){t(".goods_show_img_right_nav a").click(function(){t(this).addClass("choose").siblings().removeClass("choose"),t(".content_list").children().not("div").not(":last").eq(t(this).index()).css({display:"block"}).siblings().not(":last").css({display:"none"})})}function a(){t(".cut").click(function(){t("#buy_num_input").val()>1&&t("#buy_num_input").val(t("#buy_num_input").val()-1)}),t(".add").click(function(){t("#buy_num_input").val(parseInt(t("#buy_num_input").val())+1)})}function r(){t(".goods_show ul li img").mouseover(function(){t(this).css({border:"2px solid #e4393c",padding:0}),$src=t(this).attr("src"),t(".wrap a img").attr("src",$src)}),t(".goods_show ul li img").mouseout(function(){t(this).css({border:"1px solid #dfdfdf",padding:"1px"})})}function c(){t(".wrap .mouse_wrap").mousemove(function(o){t(".wrap .small_box").stop().fadeIn(100),t(".wrap .big_box").stop().fadeIn(100),mouse_position={x:o.clientX+t(window).scrollLeft(),y:o.clientY+t(window).scrollTop()},box_position={x:Math.min(t(this).width()-t(".wrap .small_box").width(),Math.max(0,mouse_position.x-t(this).offset().left-t(".wrap .small_box").width()/2)),y:Math.min(t(this).height()-t(".wrap .small_box").height(),Math.max(0,mouse_position.y-t(this).offset().top-t(".wrap .small_box").height()/2))},t(".wrap .small_box").css({left:box_position.x,top:box_position.y}),"/"==t(".wrap a img").attr("src").slice(-1)?$src=t(".wrap a img").attr("src").slice(0,-9)+".jpg":$src=t(".wrap a img").attr("src").slice(0,-8)+".jpg",t(".wrap .big_box").css({backgroundPositionX:2*-box_position.x,backgroundPositionY:2*-box_position.y,backgroundImage:"url("+$src+")"})}),t(".wrap .mouse_wrap").mouseout(function(o){t(".wrap .small_box").stop().fadeOut(100),t(".wrap .big_box").stop().fadeOut(100)})}(t=jQuery)("#head_insert").load("head.html",function(){test()}),t("#footer_insert").load("footer.html"),t(function(){t(".fdImg a").click(function(){t(this).attr("href",t(".wrap a img").attr("src").slice(0,-8)+".jpg")}),t.ajax({type:"get",url:"http://localhost:8080/Jsonp/test.json",async:!0,success:function(l){for(var p={},u=0;u<l.length;u++)for(var g in l[u])if(l[u].gdsid==location.href.slice(location.href.indexOf("id=")+3)){p=l[u];break}l=p,console.log(),callback1(p),p.msedate&&setInterval(function(){var o=new Date,i=new Date(l.msedate.slice(0,10)),s=-(o.getTime()-i.getTime());s/=1e3;var n=parseInt(s/86400),a=parseInt((s-86400*n)/3600),r=parseInt((s-86400*n-3600*a)/60),c=parseInt(s%60);t("#leftTime").text("剩余时间"+n+"天"+e(a)+":"+e(r)+":"+e(c))},1e3),n(),c(),r(),a(),i(),s(),o()}})})})});