"use strict";require(["../js/config"],function(){require(["jquery","test","common","goods","jquery_ui","head"],function(t){function i(){t(".fixed_box").click(function(i){i.offsetY>62&&t("body").stop().animate({scrollTop:0},500)})}function o(){var i={src:"",title:"",id:"",size:"",vipprice:"",getprice:"",num:"",total:""};t(".mg_l img").click(function(){t(".insert_into_cart").css({display:"block",top:t(window).height()/2+t(window).scrollTop()+"px"}),i.src=t(".wrap a img").attr("src"),i.title=t(".goods_right_title h1 font").text().trim(),i.id=t(".shop_id").text(),i.size="无",i.vipprice=t(".big_price").text().slice(1,t(".big_price").text().indexOf(".")),i.getprice=i.vipprice,i.num=t("#buy_num_input").val(),i.total=i.vipprice*i.num;var o=null;o=Cookie.getCookie("goods")?JSON.parse(Cookie.getCookie("goods")):[];for(var s=0;s<o.length;s++)if(o[s].id==i.id){o[s].num=parseInt(o[s].num)+parseInt(i.num),o[s].total=o[s].num*o[s].getprice;break}0!=o.length&&s!=o.length||o.push(i),Cookie.insertCookie("goods",JSON.stringify(o),432e3)})}function s(){t(".btn_close").click(function(){t(".insert_into_cart").css({display:"none"})}),t(".continueShopping").click(function(){t(".insert_into_cart").css({display:"none"})})}function n(t){return t<10&&(t="0"+t.toString()),t}function e(){t(".goods_show_img_right_nav a").click(function(){t(this).addClass("choose").siblings().removeClass("choose"),t(".content_list span").not(":last").eq(t(this).index()).css({display:"block"}).siblings().not(":last").css({display:"none"})})}function a(){t(".cut").click(function(){t("#buy_num_input").val()>1&&t("#buy_num_input").val(t("#buy_num_input").val()-1)}),t(".add").click(function(){t("#buy_num_input").val(parseInt(t("#buy_num_input").val())+1)})}function c(){t(".goods_show ul li img").mouseover(function(){t(this).css({border:"2px solid #e4393c",padding:0}),$src=t(this).attr("src"),t(".wrap a img").attr("src",$src)}),t(".goods_show ul li img").mouseout(function(){t(this).css({border:"1px solid #dfdfdf",padding:"1px"})})}function r(){t(".wrap .mouse_wrap").mousemove(function(i){t(".wrap .small_box").stop().fadeIn(100),t(".wrap .big_box").stop().fadeIn(100),mouse_position={x:i.clientX+document.body.scrollLeft,y:i.clientY+document.body.scrollTop},box_position={x:Math.min(t(this).width()-t(".wrap .small_box").width(),Math.max(0,mouse_position.x-t(this).offset().left-t(".wrap .small_box").width()/2)),y:Math.min(t(this).height()-t(".wrap .small_box").height(),Math.max(0,mouse_position.y-t(this).offset().top-t(".wrap .small_box").height()/2))},t(".wrap .small_box").css({left:box_position.x,top:box_position.y}),"/"==t(".wrap a img").attr("src").slice(-1)?$src=t(".wrap a img").attr("src").slice(0,-9)+".jpg":$src=t(".wrap a img").attr("src").slice(0,-8)+".jpg",t(".wrap .big_box").css({backgroundPositionX:2*-box_position.x,backgroundPositionY:2*-box_position.y,backgroundImage:"url("+$src+")"})}),t(".wrap .mouse_wrap").mouseout(function(i){t(".wrap .small_box").stop().fadeOut(100),t(".wrap .big_box").stop().fadeOut(100)})}(t=jQuery)("#head_insert").load("head.html",function(){test()}),t("#footer_insert").load("footer.html"),t(function(){t(".fdImg a").click(function(){t(this).attr("href",t(".wrap a img").attr("src").slice(0,-8)+".jpg")}),t.ajax({type:"get",url:"http://localhost:8080/Jsonp/test.json",async:!0,success:function(l){for(var p={},u=0;u<l.length;u++)for(var d in l[u])if(l[u].gdsid==location.href.slice(location.href.indexOf("id=")+3)){p=l[u];break}l=p,console.log(),callback1(p),p.msedate&&setInterval(function(){var i=new Date,o=new Date(l.msedate.slice(0,10)),s=-(i.getTime()-o.getTime());s/=1e3;var e=parseInt(s/86400),a=parseInt((s-86400*e)/3600),c=parseInt((s-86400*e-3600*a)/60),r=parseInt(s%60);t("#leftTime").text("剩余时间"+e+"天"+n(a)+":"+n(c)+":"+n(r))},1e3),e(),r(),c(),a(),o(),s(),i()}})})})});