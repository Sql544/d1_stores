"use strict";function createLists(e){var t=Cookie.getCookie("loginmessage");if(0==t)a="passerby";else var a=JSON.parse(t)[0].username;var n=Cookie.getCookie("goods");n=JSON.parse(n),n=Array.from(n);for(i=0;i<n.length;i++)if(n[i].name==a){var o=n[i].goods;break}for(var i=0;i<o.length;i++){var r=document.createElement("tr");r.style="background: #fffddd;";var l=document.createElement("td");l.style="background:#fffddd;",l.className="cart_1",l.height=100;var s=document.createElement("a");s.href="#";var d=document.createElement("img");d.src=o[i].src,s.appendChild(d),l.appendChild(s);var p=document.createElement("td");p.className="other_message",p.style="text-align: left";var m=document.createElement("span");m.innerText=o[i].title;var c=document.createElement("br"),g=document.createElement("span");g.innerText=o[i].id;var u=document.createElement("br"),f=document.createElement("a");f.innerText="删除",f.className="delete";var h=document.createElement("span");h.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;";var v=document.createElement("a");v.innerText="加入收藏",p.appendChild(m),p.appendChild(c),p.appendChild(g),p.appendChild(u),p.appendChild(f),p.appendChild(h),p.appendChild(v),td3=document.createElement("td"),td3.innerText="无";var C=document.createElement("td"),k=document.createElement("span");k.innerText=o[i].vipprice,C.appendChild(k);var b=document.createElement("td"),_=document.createElement("span");_.innerText=o[i].getprice,_.className="getprice",b.appendChild(_);var x=document.createElement("td"),y=document.createElement("a");y.className="cut",y.style="float: left;";var N=document.createElement("img");N.src="http://images.d1.com.cn/images2012/New/flow/j_a.gif",y.appendChild(N);var E=document.createElement("input");E.type="text",E.className="buy_num_input",E.value=o[i].num;var J=document.createElement("a");J.className="add",J.style="float: left;";var O=document.createElement("img");O.src="http://images.d1.com.cn/images2012/New/flow/a_j.gif",J.appendChild(O),x.appendChild(y),x.appendChild(E),x.appendChild(J);var S=document.createElement("td"),T=document.createElement("font");T.color="#FF0000",T.innerText=o[i].total,T.className="small_total",S.appendChild(T),r.appendChild(l),r.appendChild(p),r.appendChild(td3),r.appendChild(C),r.appendChild(b),r.appendChild(x),r.appendChild(S),$(".shopLists tbody").append(r)}e()}function goods_num(){$(".cut").click(function(){var e=Cookie.getCookie("goods");e=JSON.parse(e),e=Array.from(e);var t=Cookie.getCookie("loginmessage");if(0==t)a="passerby";else var a=JSON.parse(t)[0].username;if($input_box=$(this).parent().parent().find(".buy_num_input"),$id=$(this).parent().parent().find(".other_message span").eq(1).text(),$price=$(this).parent().parent().find(".getprice").text(),$smalltotal=$(this).parent().parent().find(".small_total"),$input_box.val()>1){$input_box.val($input_box.val()-1),$smalltotal.text($input_box.val()*$price);for(var n=0;n<e.length;n++)if(e[n].name==a){for(var o=0;o<e[n].goods.length;o++)if(e[n].goods[o].id==$id){e[n].goods[o].num=$input_box.val(),e[n].goods[o].total=$smalltotal.text(),Cookie.insertCookie("goods",JSON.stringify(e),432e3,"/");break}break}getallnum(),getallmoney()}}),$(".add").click(function(){var e=Cookie.getCookie("goods");e=JSON.parse(e),e=Array.from(e);var t=Cookie.getCookie("loginmessage");if(0==t)a="passerby";else var a=JSON.parse(t)[0].username;$input_box=$(this).parent().parent().find(".buy_num_input"),$id=$(this).parent().parent().find(".other_message span").eq(1).text(),$price=$(this).parent().parent().find(".getprice").text(),$smalltotal=$(this).parent().parent().find(".small_total"),$input_box.val(parseInt($input_box.val())+1),$smalltotal.text($input_box.val()*$price);for(var n=0;n<e.length;n++)if(e[n].name==a){for(var o=0;o<e[n].goods.length;o++)if(e[n].goods[o].id==$id){e[n].goods[o].num=$input_box.val(),e[n].goods[o].total=$smalltotal.text(),Cookie.insertCookie("goods",JSON.stringify(e),432e3,"/");break}break}getallnum(),getallmoney()})}function delete_oneline(){$(".delete").click(function(){var e=Cookie.getCookie("goods");e=JSON.parse(e),e=Array.from(e);var t=Cookie.getCookie("loginmessage");if(0==t)a="passerby";else var a=JSON.parse(t)[0].username;$id=$(this).parent().parent().find(".other_message span").eq(1).text(),$(this).parent().parent().remove();for(var n=0;n<e.length;n++)if(e[n].name==a){for(var o=0;o<e[n].goods.length;o++)if(e[n].goods[o].id==$id){e[n].goods.splice(o,1),Cookie.insertCookie("goods",JSON.stringify(e),432e3,"/");break}break}getallnum(),getallmoney()})}function deleteall(){$(".deleteall").click(function(){var e=Cookie.getCookie("goods");e=JSON.parse(e),e=Array.from(e);var t=Cookie.getCookie("loginmessage");if(0==t)a="passerby";else var a=JSON.parse(t)[0].username;for(var n=0;n<e.length;n++)if(e[n].name==a){e[n].goods=[],Cookie.insertCookie("goods",JSON.stringify(e),432e3,"/");break}$(".shopLists tr").not(":first").remove(),$(".tailed").find("font").eq(0).text(0),$(".tailed").find("span").text(0)})}function getallnum(){var e=0;$(".buy_num_input").each(function(){e+=parseInt($(this).val())}),$(".tailed").find("font").eq(0).text(e)}function getallmoney(){var e=0;$(".small_total").each(function(){e+=parseInt($(this).text())}),$(".tailed").find("span").text(e)}require(["../js/config"],function(){require(["jquery","common"],function(e){(e=jQuery)(function(){var t=Cookie.getCookie("loginmessage");setTimeout(function(){if(0==t);else{JSON.parse(t)[0].username;e(".f_l").html("您好&nbsp <a href='#'>"+JSON.parse(t)[0].username+"</a> 欢迎来到D1购物<a href='#'>(退出登录)</a>&nbsp")}e(".f_l").find("a").last().click(function(){JSON.parse(t)[0].login=!1,document.cookie="loginmessage=0;path=/;",window.location.href="/html/login.html"})},300),createLists(function(){getallnum(),getallmoney(),goods_num(),delete_oneline(),deleteall()})})})});