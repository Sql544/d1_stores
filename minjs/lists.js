"use strict";require(["../js/config"],function(){require(["jquery","test","common","jquery_ui","goods","head"],function(e){function t(t){var n=document.createElement("a");e(".pagefooter").append(n),n.innerText="首页",n.href="#",n.style.display="none";var i=document.createElement("a");e(".pagefooter").append(i),i.innerText="上一页",i.href="#",i.style.display="none";var s=document.createElement("a");e(".pagefooter").append(s),s.innerText=1,s.className="curr",s.href="#";for(var o=1;o<t;o++){var l=document.createElement("a");e(".pagefooter").append(l),l.innerText=o+1,l.href="#"}var a=document.createElement("a");e(".pagefooter").append(a),a.innerText="下一页",a.href="#";var r=document.createElement("a");e(".pagefooter").append(r),r.innerText="尾页",r.href="#",e(".pagefooter a").click(function(){1==e(this).text()?(i.style.display="none",n.style.display="none",a.style.display="inline-block",r.style.display="inline-block"):e(this).text()==t?(i.style.display="inline-block",n.style.display="inline-block",a.style.display="none",r.style.display="none"):(i.style.display="inline-block",n.style.display="inline-block",a.style.display="inline-block",r.style.display="inline-block");var s=e(this).text();$cilick=e(this),"首页"==s?(s=1,$cilick=e(".pagefooter a").eq(2)):"尾页"==s?(s=t,$cilick=e(".pagefooter a").eq(1+t)):"上一页"==s?(s=e(".curr").text()-1,$cilick=e(".pagefooter a").eq(e(".curr").index()-2)):"下一页"==s&&(s=parseInt(e(".curr").text())+1,$cilick=e(".pagefooter a").eq(e(".curr").index())),1==$cilick.text()?(i.style.display="none",n.style.display="none",a.style.display="inline-block",r.style.display="inline-block"):$cilick.text()==t&&(i.style.display="inline-block",n.style.display="inline-block",a.style.display="none",r.style.display="none"),e(".pagefooter font").eq(1).text($cilick.text()),parseInt(s)&&($cilick.addClass("curr").siblings().removeClass("curr"),e(".shop_list li").each(function(){console.log(e(this).index(),20*s),e(this).index()>=20*s||e(this).index()<20*(s-1)?e(this).css({display:"none"}):e(this).css({display:"block"})}))})}(e=jQuery)("#head_insert").load("head.html",function(){test()}),e("#footer_insert").load("footer.html"),e(function(){jsonp("http://localhost:8020/d1/Jsonp/Jsonp.js");jsonp_goods("http://localhost:8020/d1/Jsonp/goodsJsonp.js");setTimeout(function(){e(".shoptitle").each(function(){"价格"==e(this).text().trim()&&($price=e(this).siblings().find("a"))}),$price.click(function(){var t=e(this).text(),n=0;if(-1!=t.indexOf("-"))var i=t.slice(0,t.indexOf("-")),s=t.slice(t.indexOf("-")+1);else var o=parseInt(t);console.log(o),e(".shop_list li").find(".my_price").each(function(){o?e(this).find("font").text()<o&&e(this).get(0).parentNode.parentNode.parentNode.remove():(console.log(parseInt(e(this).find("font").text()),parseInt(s)),parseInt(e(this).find("font").text())>parseInt(s)||parseInt(e(this).find("font").text())<parseInt(i)?e(this).get(0).parentNode.parentNode.parentNode.style.display="none":(e(this).get(0).parentNode.parentNode.parentNode.style.display="block",n++)),e(".pagefooter").remove()})}),e(".shop_list li").each(function(){e(this).index()>=20&&e(this).css({display:"none"})}),e(".goods_num_btn a").click(function(){0==e(this).index()?e(this).get(0).parentNode.previousElementSibling.children[0].value++:2==e(this).index()&&e(this).get(0).parentNode.previousElementSibling.children[0].value>1&&e(this).get(0).parentNode.previousElementSibling.children[0].value--});var n=Math.ceil(e(".shop_list li").length/20);t(n),e(".pagefooter font").eq(0).text(n)},300)})})});